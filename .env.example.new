# ========================================
# CONFIGURACIÓN IDEALISTA BOT - v2.0 con QUOTA CONTROL
# ========================================

# --- CREDENCIALES IDEALISTA API ---
IDEALISTA_API_KEY=tu_api_key_aqui
IDEALISTA_SECRET=tu_secret_aqui

# --- CREDENCIALES TELEGRAM ---
TELEGRAM_TOKEN=tu_bot_token_aqui
TELEGRAM_CHAT_ID=tu_chat_id_aqui

# --- ZONA HORARIA ---
TZ=Europe/Madrid

# --- PARÁMETROS DE BÚSQUEDA ---
SEARCH_LAT=37.1729
SEARCH_LNG=-3.5995
SEARCH_RADIUS=6000

# Dormitorios a buscar (separados por comas)
SEARCH_BEDROOMS=2,3,4

# Baños a buscar (separados por comas)
SEARCH_BATHROOMS=1,2,3

# --- ESTRATEGIA DE CONSUMO CON CONTROL DE QUOTA ---
# ⭐ CRÍTICO: Idealista API tiene límite de 100 peticiones/mes
# Con estos settings: ~50 peticiones/mes (margen de seguridad 50%)
MAX_PAGES_PER_DAY=5
ITEMS_PER_PAGE=50

# ⭐ MONTHLY_REQUEST_LIMIT: NUNCA CAMBIAR (es límite del API)
MONTHLY_REQUEST_LIMIT=100

# ⭐ SEARCH_INTERVAL_HOURS: Espaciar búsquedas para economizar quota
# 72 horas = 3 días = ~20 búsquedas/mes = ~100 requests (SEGURO)
# Si quieres menos búsquedas: aumenta a 120 (5 días) = ~50 requests
# Si quieres más búsquedas: reduce a 48 (2 días) = ~150 requests ⚠️ RIESGO
SEARCH_INTERVAL_HOURS=72

# ⭐ QUOTA_WARNING_THRESHOLD: Alerta cuando se use este % de quota
# 0.8 = alerta al 80% (80 de 100 peticiones usadas)
QUOTA_WARNING_THRESHOLD=0.8

# ⭐ PAUSE_AT_QUOTA: Pausar búsquedas cuando se alcance límite
# true = pausar automáticamente al llegar a 100/100 (RECOMENDADO)
# false = intentar de todos modos (NO RECOMENDADO)
PAUSE_AT_QUOTA=true

# --- TIEMPOS Y REINTENTOS ---
REQUEST_TIMEOUT=15
PAGE_WAIT_TIME=1.5
TELEGRAM_TIMEOUT=10

# --- REINTENTOS ---
MAX_RETRIES=3
RETRY_DELAY=5

# --- LOGGING ---
LOG_LEVEL=INFO
LOG_MAX_BYTES=5242880
LOG_BACKUP_COUNT=5

# --- BACKUPS ---
ENABLE_BACKUPS=true
